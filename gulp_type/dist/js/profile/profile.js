"use strict";$commonRequest.getAuth(function(){location.href=$config.loginPage}),userInfo.userAvatar&&($("#headerAvatar").attr("src",nowLocale+userInfo.userAvatar),$("#headerAvatar").data("origin",userInfo.userAvatar).parent().addClass("active")),userInfo.username&&$("#nickName").val(userInfo.username),$("#avatarInputHeader").on("change",function(){var e=new FileReader;f=$("#avatarInputHeader")[0].files[0],e.readAsDataURL(f),e.onload=function(e){$("#headerAvatar").attr("src",this.result).data("type",f.type).parent().addClass("active");var a={titleImgSrc:$("#headerAvatar").attr("src"),type:f.type,imgUse:1};$commonRequest.uploadImg(a,function(t){$("#headerAvatar").data("origin",t),$commonRequest.updateUserInfo({userId:userInfo.userId,userAvatar:t},function(e){$TipsDialog({text:"Success!"});var a=JSON.parse($cookie.get("UIN"));a.userAvatar=t,$cookie.set("UIN",JSON.stringify(a))})})}}),$(".updateAccount").click(function(){var t=$("#nickName").val().trim();t?$commonRequest.updateUserInfo({userId:userInfo.userId,username:t},function(e){$TipsDialog({text:"Success!"});var a=JSON.parse($cookie.get("UIN"));a.username=t,$cookie.set("UIN",JSON.stringify(a))}):$TipsDialog({text:"Please input nick name."})}),$(".updatePwd").click(function(){var e=$("#pwdInput").val().trim(),a=$("#newInput").val().trim(),t=$("#newInput_2").val().trim();if(e&&a&&t)if(a==t){var r={cp:e,np:a,userId:userInfo.userId};$.ajax({url:"/changePwd",method:"POST",data:r,success:function(e){1==e.code?$TipsDialog({text:"Success."}):$TipsDialog({text:"Error."})},error:function(e){$TipsDialog({text:"Interval Server Error."})}})}else $TipsDialog({text:"Password should same with confirm password."});else $TipsDialog({text:"Please input password/confirm password."})});